# CANU Release Process

1. Update your local branch for parity with the remote

   ```bash
   git checkout develop
   git pull
   ```

1. Put up a PR from `develop` to `main`.
1. Once the PR is merged, chekcout and update main locally and take a new git-tag (`x.y.z`, no leading `v`) 

    ```bash
    git checkout main
    git pull
    git fetch origin --tags
    git tag x.y.z
    git push orgin --tags
    ```

1. Navigate to GitHub releases: `https://github.com/Cray-HPE/canu/releases`
1. Select "Draft a new release"
1. "Choose a tag" and choose the tag you pushed.
1. Select "autogenerate release notes" to pre-populate the fields
1. Write a short, quippy title for the release (replacing the autogenerated one, maybe)
1. In the main text write "Overview", a few short bullet points pulled from the changelog outlining major changes.
1. In the main text write "Detailed Changelog" and paste in the changelog from readme.md
1. Click "Publish release"
1. Make sure the `canu` binary RPM exists in artifactory.
1. Once new `canu` RPM is created. Navigate to: `https://github.com/Cray-HPE/canu/releases` edit release and upload the new RPM can also be downloaded from GitHub.

`canu` exists in the pre-install-toolkit, and needs a manifest updated here:

* [1.3 and older Pre-Install Toolkits][1]
* [1.4 and newer Pre-Install Toolkits][2]

`canu` also exists in the CSM tarball, and needs a manfiest update for both its RPM and Docker images here:

* [RPM][3]
* [Docker Image][4]


[1]: https://github.com/Cray-HPE/csm-rpms/blob/main/packages/cray-pre-install-toolkit
[2]: https://github.com/Cray-HPE/csm-rpms/blob/main/packages/node-images-pre-install-toolkit
[3]: https://github.com/Cray-HPE/csm/blob/main/rpm/cray/csm/sle-15sp3/index.yaml
[4]: https://github.com/Cray-HPE/csm/blob/main/docker/index.yaml
